---
title: "Introduction to R"
author: "Joe Mills"
date: "8/24/2017"
output: 
  #html_document
  revealjs::revealjs_presentation:
    theme: serif
    highlight: tango
    center: false
    transition: slide
    #incremental: true
---

```{r setup, include=FALSE}
library(knitr)

knitr::opts_chunk$set(echo = FALSE)
```


# What is R?

* Interpreted, functional programming language\n
* Heavy emphasis on statistical computing and graphics\n
* Highly extensible
* "Can you do it in R?" The answer is almost always "Yes", but may not be the __best__ answer\n
* (This presentation was authored and created using R\n)
* __Let's dive in!__

## Overview

* Interpreted language like Python
* Console ![](/Users/jmills/Documents/NCAR-R/R_training/images/console.png) 

## Overview

* Has a 'winning' IDE
* R-Studio ![](/Users/jmills/Documents/NCAR-R/R_training/images/rstudio.png) 

## Basic syntax
Standard data types: 
```{r eval=FALSE, echo=TRUE} 
integer, numeric, character, logical, Date, POSIXct, ...
``` 

Standard operators: 
```{r eval=FALSE, echo=TRUE} 
+,*,>,<,==,!=, ...
```

Non-standard operator: The assignment operator ```<-```
```{r eval=TRUE, echo=TRUE}
x <- 1
y = 1
```

* Best practice is to __ALWAYS__ use assignment operator, = reserved for function arguments

## Basic data structures
```{r eval=FALSE, echo=TRUE} 
#vectors - one data type
c('a','b','c')
c(1,2,3)

#matrices - one data type
matrix(c(1,2),c(4,5))

#lists - Multiple data types, can include names like Python
list('a',1,TRUE)
list(character = 'a', numeric = 1, logical = TRUE)

#dataframes - Multiple data types, the foundation of many R workflows, similar to Pandas.DataFrame
data.frame(site = c('site1','site2','site3'),
           var1 = c(1.1,2.2,3.3),
           var2 = as.Date(c('2016-01-01','2016-01-02','2016-01-03'))
)
```

* Note the () - functional language! Almost everything is a function

## Object oriented
Some object oriented programming as well with generic functions via methods and classes

```{r echo = TRUE}
x <- runif(1:10)
y <- runif(1:10)

#Generic print function on a vector
print(x)

#Generic print function on linear model object
linMod <- lm(x~y)
print(linMod)
```

# Extensible

* Easily extended through packages
* The Comprehensive R Archive Network - CRAN
* 11,282 packages currently
* [https://cran.r-project.org/](https://cran.r-project.org/)

```{r eval = FALSE, echo=TRUE}
install.packages('someSuperCoolPackageIWant')
```
  
* Non-CRAN packages hosted on GitHub 

```{r eval = FALSE, echo=TRUE}
devtools::install_github('someOtherSuperCoolPackageIWant')
```

## rwrfhydro

* R package developed by the NCAR WRF-Hydro group
* Library of tools (functions) to assist with various tasks related to WRF-Hydro
* Pre- and post-processing 
* Publicly available and open for community code contributions
* [https://github.com/NCAR/rwrfhydro](https://github.com/NCAR/rwrfhydro)

# The good, the bad, and what to do about it

## The Good

* Vibrant community of contributors in many scientific fields
* Exhaustive collection of domain-specific libraries for statistics and analysis
* Open source, build on and contribute to what others have done
* Generally reliable, well documented, and well vetted libraries
* __Graphics!__

## The Bad

* R is a language for analysis not a general purpose programming language means fewer and narrower range of libraries

```{r echo=FALSE, results='as is'}
packageTable <- data.frame(Language = c('R','Python'),
                           Packages = c(11282,115361))
kable(packageTable)

```

* Capable, but not as ideal for deploying in production environments as other languages (e.g. Python)

* Base R library generally slow and memory intensive 

## What to do about it

* Use a database to reduce the working size of your data problem
* Use optimized R packages written in C/C++ (data.table,dplyr,RcppRoll,etc...)
* Let a wrench be a wrench and a hammer be a hammer
* R is very good at working with relatively small (<~ 100 million rows) pieces of data in a very sophisticated way
* Let R do the sophisticated statistics, visualizations, and reporting 
* Use another language if need be to do the production cleaning, aggregating, and storage tasks

# Additional resources

* [Coursera - R programming online course](https://www.coursera.org/learn/r-programming)
* [USGS R-package development course](https://owi.usgs.gov/R/training-curriculum/r-package-dev/)
* [Advanced R by Hadley Wickham](http://adv-r.had.co.nz/)
* And of course [Stackoverflow](https://stackoverflow.com/)
